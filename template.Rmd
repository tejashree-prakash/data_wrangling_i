---
title: "Data Import"
output: github_document
---

```{r}
library(tidyverse)
library(readxl)
library(haven)
```

Let's import a dataset. 

```{r}
litters_df = 
  read_csv("data_import_examples/FAS_litters.csv") #Don't use read.csv
```

Look at your data!

```{r}
names(litters_df)
```
Update the names in 'litters_df'. 

```{r}
litters_df = 
  janitor::clean_names(litters_df) #Just want clean_names function from janitor package without loading the whole package
names(litters_df)
litters_df
```

Sometimes skimming data is neat?

```{r}
skimr::skim(litters_df)
```

## Fix the missingness (using two hashtags to make font of this title bigger)

```{r}
litters_df =
    read_csv("data_import_examples/FAS_litters.csv", na = c("NA", ".", "")) #This will change the "." to NA to keep consistency. 
```

## Import the FAS_pups dataset. 

```{r}
#Prefernce is to 
pups_df = 
  read_csv("data_import_examples/FAS_pups.csv", 
          skip = 3, #Skip first three rows since empty 
          na = c("NA", ".", "")
  )

#Clean names
pups_df = 
  janitor::clean_names(pups_df)
names(pups_df)
```

## Okay what about Excel 

CSVs are really great but sometimes you get an excel file. Try to use CSVs if possible though...

```{r}
mlb_df <-  
  read_excel("data_import_examples/mlb11.xlsx")
mlb_df
```

Now what about when the tables aren't neatly displayed in Excel and have formatting. 

Import LOR word counts. 

```{r}
fotr_df <- 
  read_excel("data_import_examples/LotR_Words.xlsx", 
             range = "B3:D6") #Specifies the range of which of the three tables we want from the Excel. 
```

## SAS????

Import the PULSE data. 

```{r}
pulse_df <- 
  read_sas("data_import_examples/public_pulse_data.sas7bdat")

pulse_df <- 
  janitor::clean_names(pulse_df)
```



##Why do I hate read.csv so much?? It prints worse and doesn't organize it as readable.

```{r, eval=FALSE}
litters_df_base <- 
    read.csv("data_import_examples/FAS_litters.csv")
```


## What about data exporting?

```{r}
#Saving the df now.
write_csv(fotr_df, "data_import_examples/fotr_df.csv")
```


##Data Manipulation Lecture: 9/18/25


Let's import the datasets. 

```{r}
litters_df =
    read_csv("data_import_examples/FAS_litters.csv", na = c("NA", ".", ""))
litters_df <- 
  janitor::clean_names(litters_df)

pups_df = 
  read_csv("data_import_examples/FAS_pups.csv", skip = 3, na = c("NA", ".", ""))
pups_df <- 
  janitor::clean_names(pups_df)
```


## 'select'

'select' selects variables/COLUMNS from my dataframe. 

select specific variables 

```{r}
select(litters_df, group, litter_number, gd0_weight)

```

select a range
```{r}
select(litters_df, group:gd_of_birth)
```

select by removal
```{r}
select(litters_df, -group)
select(litters_df,-(group:gd_of_birth)) #combine removing with a range 
```

select by prefix
```{r}
select(litters_df, group, starts_with("gd")) #select anything that starts with gd
#also is an 'ends_with' or 'contains'
```

rearrange by selecting order
```{r}
select(litters_df, starts_with("gd"), group) #order listed here is order it'll come out in
select(litters_df, litter_number, everything())

relocate(litters_df, litter_number)
```

rename by selecting
```{r}
select(litters_df, GROUP = group, everything())
rename(litters_df, GROUP = group)
```

what if i only select one variable...?
```{r}
select(litters_df, group) #outputs as a df

pull(litters_df, group) #outputs a vector 
```

learning assessment for pups df
```{r}
select(pups_df, litter_number, sex, pd_ears)
```

## 'filter' 

use 'filter()' to filter out ROWS. test for equality using two ==. 
```{r}
filter(litters_df, gd_of_birth == 20, pups_born_alive == 6) #filter removes everything that doesn't fit this 

```

look for number of pups alive
```{r}
filter(litters_df, pups_born_alive > 5)
filter(litters_df, pups_born_alive >= 5)
filter(litters_df, pups_born_alive <= 5)
```

look for non-matches
```{r}
filter(litters_df, pups_born_alive !=6)
```

match to a set
```{r}
filter(litters_df, group %in% c("Con7", "Con8")) #keep only con7 and con8 within group variable
```

filter out missing rows with 'drop_na()'
```{r}
drop_na(litters_df) #by default it will only look for complete cases
drop_na(litters_df, gd0_weight) #this will only take out NA from specific variable
```

learning assessment for pups_df
```{r}
filter(pups_df, sex == 1)

filter(pups_df, pd_walk < 11, sex == 2) #filtering with two conditions 
```

